table(Locs3.28$TagId)
Tag781 <- Locs3.28[Locs3.28$TagId == "781E4B78",]
DateRangeTag781 <- range(Tag781$Date)
DateSeqTag781 <- seq.POSIXt(DateRangeTag781[1], DateRangeTag781[2], by=1)
DateRangeTag781[1]-1
DateRangeTag781[1]
DateRangeTag781 <- as.Date(DateRangeTag781)
DateRangeTag781[1]-1
DateSeqTag781 <- seq.POSIXt(as.POSIXct(paste(DateRangeTag781[1] -1, "05:00:00")format= "%Y-%m-%d %H:%M:%S", tz="America/Denver"),
as.POSIXct(paste(DateRangeTag781[1] -1, "05:00:00")format= "%Y-%m-%d %H:%M:%S", tz="America/Denver")
as.POSIXct(paste(DateRangeTag781[1], "05:00:00")format= "%Y-%m-%d %H:%M:%S", tz="America/Denver")
as.POSIXct(paste(DateRangeTag781[1], "05:00:00"),format= "%Y-%m-%d %H:%M:%S", tz="America/Denver")
as.POSIXct(paste(DateRangeTag781[1]-1, "05:00:00"),format= "%Y-%m-%d %H:%M:%S", tz="America/Denver")
DateSeqTag781 <- seq.POSIXt(as.POSIXct(paste(DateRangeTag781[1] -1, "05:00:00"),format= "%Y-%m-%d %H:%M:%S", tz="America/Denver"),
as.POSIXct(paste(DateRangeTag781[2] + 1, "05:00:00"),format= "%Y-%m-%d %H:%M:%S", tz="America/Denver"), by=1)
DateKey <- as.data.frame(TagId=Tag781$TagId, Date=DateSeqTagNumber)
DateKey <- data.frame(TagId=Tag781$TagId, Date=DateSeqTagNumber)
DateKey <- data.frame(TagId=Tag781$TagId, Date=DateSeqTag781)
DateKey <- data.frame(TagId=Tag781$TagId[1], Date=DateSeqTag781)
head(DateSeqTag781)
DateSeqTag781 <- seq.POSIXt(as.POSIXct(paste(DateRangeTag781[1] -1, "05:00:00"),format= "%Y-%m-%d %H:%M:%S", tz="America/Denver"),
as.POSIXct(paste(DateRangeTag781[2] + 1, "05:00:00"),format= "%Y-%m-%d %H:%M:%S", tz="America/Denver"), by="1 day")
DateSeqTag781
DateKey <- data.frame(TagId=Tag781$TagId[1], Date=DateSeqTag781)
DateSeqTag781 + 1
DateSeqTag781 + "1 day"
60*60*24
DateSeqTag781 + 86400
DateKey <- data.frame(TagId=Tag781$TagId[1], Date=DateSeqTag781, Date2=DateSeqTag781 + 86400)
View(DateKey)
TimeRange <- range([Tag781$DateTime > DateKey$Date & Tag781$DateTime < DateKey$Date2,]$DateTime)
TimeRange <- range(Tag781[Tag781$DateTime > DateKey$Date & Tag781$DateTime < DateKey$Date2,]$DateTime)
?apply
TimeRange <- data.frame(ObsStart=as.POSIXct(), ObsEnd=as.POSIXct(), TimeDiff=as.difftime(),
DateKeyStart=as.POSIXct(), DateKeyEnd=as.POSIXct())
TimeRange <- data.frame(ObsStart=as.character(), ObsEnd=as.character(), TimeDiff=as.difftime(),
DateKeyStart=as.character(), DateKeyEnd=as.character())
TimeRange <- data.frame(ObsStart=as.character(), ObsEnd=as.character(), TimeDiff=as.numeric(),
DateKeyStart=as.character(), DateKeyEnd=as.character())
range(Tag781[between(Tag781$DateTime, DateKey$Date[1], DateKey$Date2[1]]$DateTime)
range(Tag781[between(Tag781$DateTime, DateKey$Date[1], DateKey$Date2[1])]$DateTime)
View(DateKey)
str(DateKey)
Tag781[between(Tag781$DateTime, DateKey$Date[i], DateKey$Date2[i])]
Tag781[between(Tag781$DateTime, DateKey$Date[1], DateKey$Date2[1])]
DateRangeTag781
nrow(DateKey)
as.data.frame(DateRangeTag781)
as.data.frame(t(DateRangeTag781))
t(as.data.frame(DateRangeTag781))
class(t(as.data.frame(DateRangeTag781)))
?as.data.frame
cbind.data.frame(t(DateRangeTag781))
cbind.data.frame(DateRangeTag781)
as.data.frame(matrix(DateRangeTag781, ncol=2,byrow=T))
data.frame(matrix(DateRangeTag781, ncol=2,byrow=T))
data.frame(as.list(DateRangeTag781))
?data.frame
as.data.frame(as.list(DateRangeTag781))
data.frame(as.list(DateRangeTag781), colnames= c("ObsStart", "ObsEnd"))
as.data.frame(as.list(DateRangeTag781), colnames= c("ObsStart", "ObsEnd"))
for (i in 1:length(DateKey)){
subsetTag <- Tag781[between(Tag781$DateTime, DateKey$Date[i], DateKey$Date2[i])]
if(nrow(subsetTag) > 0){
x <- range(subsetTag$DateTime)
x <- as.data.frame(as.list(DateRangeTag781))
colnames(x) <- c("ObsStart", "ObsEnd")
x$TimeDiff <- as.numeric(difftime(x[1,2], x[1,1]))
x$DateKeyStart <- DateKey$Date[i]
x$DateKeyEnd <- DateKey$Date2[i]
TimeRange <- rbind(TimeRange, x)
}
}
for (i in 1:length(DateKey)){
subsetTag <- Tag781[between(Tag781$DateTime, DateKey$Date[i], DateKey$Date2[i]),]
if(nrow(subsetTag) > 0){
x <- range(subsetTag$DateTime)
x <- as.data.frame(as.list(DateRangeTag781))
colnames(x) <- c("ObsStart", "ObsEnd")
x$TimeDiff <- as.numeric(difftime(x[1,2], x[1,1]))
x$DateKeyStart <- DateKey$Date[i]
x$DateKeyEnd <- DateKey$Date2[i]
TimeRange <- rbind(TimeRange, x)
}
}
length(DateKey)
for (i in 1:length(DateKey$Date)){
subsetTag <- Tag781[between(Tag781$DateTime, DateKey$Date[i], DateKey$Date2[i]),]
if(nrow(subsetTag) > 0){
x <- range(subsetTag$DateTime)
x <- as.data.frame(as.list(DateRangeTag781))
colnames(x) <- c("ObsStart", "ObsEnd")
x$TimeDiff <- as.numeric(difftime(x[1,2], x[1,1]))
x$DateKeyStart <- DateKey$Date[i]
x$DateKeyEnd <- DateKey$Date2[i]
TimeRange <- rbind(TimeRange, x)
}
}
View(TimeRange)
for (i in 1:length(DateKey$Date)){
subsetTag <- Tag781[between(Tag781$DateTime, DateKey$Date[i], DateKey$Date2[i]),]
if(nrow(subsetTag) > 0){
x <- range(subsetTag$DateTime)
x <- as.data.frame(as.list(x))
colnames(x) <- c("ObsStart", "ObsEnd")
x$TimeDiff <- as.numeric(difftime(x[1,2], x[1,1]))
x$DateKeyStart <- DateKey$Date[i]
x$DateKeyEnd <- DateKey$Date2[i]
TimeRange <- rbind(TimeRange, x)
}
}
for (i in 1:length(DateKey$Date)){
subsetTag[i] <- Tag781[between(Tag781$DateTime, DateKey$Date[i], DateKey$Date2[i]),]
if(nrow(subsetTag[i]) > 0){
x <- range(subsetTag[i]$DateTime)
x <- as.data.frame(as.list(x))
colnames(x) <- c("ObsStart", "ObsEnd")
x$TimeDiff <- as.numeric(difftime(x[1,2], x[1,1]))
x$DateKeyStart <- DateKey$Date[i]
x$DateKeyEnd <- DateKey$Date2[i]
TimeRange <- rbind(TimeRange, x)
}
}
View(TimeRange)
for (i in 1:length(DateKey$Date)){
subsetTag <- Tag781[between(Tag781$DateTime, DateKey$Date[i], DateKey$Date2[i]),]
if(nrow(subsetTag) > 0){
x <- range(subsetTag$DateTime)
x <- as.data.frame(as.list(x))
colnames(x) <- c("ObsStart", "ObsEnd")
x$TimeDiff <- as.numeric(difftime(x[1,2], x[1,1]))
x$DateKeyStart <- DateKey$Date[i]
x$DateKeyEnd <- DateKey$Date2[i]
TimeRange <- rbind(TimeRange, x)
}
}
View(TimeRange)
rm(TimeRange)
for (i in 1:length(DateKey$Date)){
subsetTag <- Tag781[between(Tag781$DateTime, DateKey$Date[i], DateKey$Date2[i]),]
if(nrow(subsetTag) > 0){
x <- range(subsetTag$DateTime)
x <- as.data.frame(as.list(x))
colnames(x) <- c("ObsStart", "ObsEnd")
x$TimeDiff <- as.numeric(difftime(x[1,2], x[1,1]))
x$DateKeyStart <- DateKey$Date[i]
x$DateKeyEnd <- DateKey$Date2[i]
TimeRange <- rbind(TimeRange, x)
}
}
TimeRange <- data.frame(ObsStart=as.character(), ObsEnd=as.character(), TimeDiff=as.numeric(),
DateKeyStart=as.character(), DateKeyEnd=as.character())
for (i in 1:length(DateKey$Date)){
subsetTag <- Tag781[between(Tag781$DateTime, DateKey$Date[i], DateKey$Date2[i]),]
if(nrow(subsetTag) > 0){
x <- range(subsetTag$DateTime)
x <- as.data.frame(as.list(x))
colnames(x) <- c("ObsStart", "ObsEnd")
x$TimeDiff <- as.numeric(difftime(x[1,2], x[1,1]))
x$DateKeyStart <- DateKey$Date[i]
x$DateKeyEnd <- DateKey$Date2[i]
TimeRange <- rbind(TimeRange, x)
}
}
View(TimeRange)
TimeRange <- data.frame(ObsStart=as.character(), ObsEnd=as.character(), TimeDiff=as.numeric(),
DateKeyStart=as.character(), DateKeyEnd=as.character(), TagId=as.character())
for (i in 1:length(DateKey$Date)){
subsetTag <- Tag781[between(Tag781$DateTime, DateKey$Date[i], DateKey$Date2[i]),]
if(nrow(subsetTag) > 0){
x <- range(subsetTag$DateTime)
x <- as.data.frame(as.list(x))
colnames(x) <- c("ObsStart", "ObsEnd")
x$TimeDiff <- as.numeric(difftime(x[1,2], x[1,1]))
x$DateKeyStart <- DateKey$Date[i]
x$DateKeyEnd <- DateKey$Date2[i]
x$TagId <- subsetTag$TagId
TimeRange <- rbind(TimeRange, x)
}
}
TimeRange <- data.frame(ObsStart=as.character(), ObsEnd=as.character(), TimeDiff=as.numeric(),
DateKeyStart=as.character(), DateKeyEnd=as.character(), TagId=as.character())
for (i in 1:length(DateKey$Date)){
subsetTag <- Tag781[between(Tag781$DateTime, DateKey$Date[i], DateKey$Date2[i]),]
if(nrow(subsetTag) > 0){
x <- range(subsetTag$DateTime)
x <- as.data.frame(as.list(x))
colnames(x) <- c("ObsStart", "ObsEnd")
x$TimeDiff <- as.numeric(difftime(x[1,2], x[1,1]))
x$DateKeyStart <- DateKey$Date[i]
x$DateKeyEnd <- DateKey$Date2[i]
x$TagId <- distinct(subsetTag$TagId)
TimeRange <- rbind(TimeRange, x)
}
}
?distinct
for (i in 1:length(DateKey$Date)){
subsetTag <- Tag781[between(Tag781$DateTime, DateKey$Date[i], DateKey$Date2[i]),]
if(nrow(subsetTag) > 0){
x <- range(subsetTag$DateTime)
x <- as.data.frame(as.list(x))
colnames(x) <- c("ObsStart", "ObsEnd")
x$TimeDiff <- as.numeric(difftime(x[1,2], x[1,1]))
x$DateKeyStart <- DateKey$Date[i]
x$DateKeyEnd <- DateKey$Date2[i]
x$TagId <- unique(subsetTag$TagId)
TimeRange <- rbind(TimeRange, x)
}
}
?file.path
View(Locs3.28)
#Locs3.28 <- read.csv("./3.28Est.Locations.Filter.Distance.187.5_Results.csv")
#table(Locs3.28$TagId)
#str(Locs3.28)
#Locs3.28$DateTime <- as.POSIXct(paste(Locs3.28$Date, Locs3.28$Time), format= "%Y-%m-%d %H:%M:%S", tz="America/Denver")
#Tag781 <- Locs3.28[Locs3.28$TagId == "781E4B78",]
TagList <- split(Locs3.28, f=Locs3.28$TagId)
View(TagList)
#Locs3.28 <- read.csv("./3.28Est.Locations.Filter.Distance.187.5_Results.csv")
#table(Locs3.28$TagId)
#str(Locs3.28)
#Locs3.28$DateTime <- as.POSIXct(paste(Locs3.28$Date, Locs3.28$Time), format= "%Y-%m-%d %H:%M:%S", tz="America/Denver")
#Tag781 <- Locs3.28[Locs3.28$TagId == "781E4B78",]
#TagList <- split(Locs3.28, f=Locs3.28$TagId)
#get range of dates of locations by TagId
#DateRangeTag781 <- range(Tag781$Date)
DateRange <- lapply(TagList, function (x) range(x$DateTime))
View(DateRange)
DateRange <- lapply(TagList, function (x) as.Date(x))
View(x)
rm(x)
DateRange <- lapply(TagList, function (x) as.Date(x))
#Locs3.28 <- read.csv("./3.28Est.Locations.Filter.Distance.187.5_Results.csv")
#table(Locs3.28$TagId)
#str(Locs3.28)
#Locs3.28$DateTime <- as.POSIXct(paste(Locs3.28$Date, Locs3.28$Time), format= "%Y-%m-%d %H:%M:%S", tz="America/Denver")
#Tag781 <- Locs3.28[Locs3.28$TagId == "781E4B78",]
#TagList <- split(Locs3.28, f=Locs3.28$TagId)
#get range of dates of locations by TagId
#DateRangeTag781 <- range(Tag781$Date)
DateRange <- lapply(TagList, function (x) range(x$DateTime))
DateRange <- lapply(TagList, function (x) as.Date(x))
DateRange[["192D2A1E"]]
DateRange <- lapply(TagList, function (x) Date(x))
?Date
?date
?as.Date
DateRange <- lapply(TagList, function (x) as.Date(x$DateTime, tz="America/Denver"))
View(DateRange)
#Locs3.28 <- read.csv("./3.28Est.Locations.Filter.Distance.187.5_Results.csv")
#table(Locs3.28$TagId)
#str(Locs3.28)
#Locs3.28$DateTime <- as.POSIXct(paste(Locs3.28$Date, Locs3.28$Time), format= "%Y-%m-%d %H:%M:%S", tz="America/Denver")
#Tag781 <- Locs3.28[Locs3.28$TagId == "781E4B78",]
#TagList <- split(Locs3.28, f=Locs3.28$TagId)
#get range of dates of locations by TagId
#DateRangeTag781 <- range(Tag781$Date)
DateRange <- lapply(TagList, function (x) range(x$DateTime))
View(DateRange)
DateRange <- lapply(TagList, function (x) as.Date(x$DateTime, tz="America/Denver"))
View(DateRange)
DateRange[["192D2A1E"]]
DateRange <- lapply(DateRange, function (x) as.Date(x, tz="America/Denver"))
View(DateRange)
#Locs3.28 <- read.csv("./3.28Est.Locations.Filter.Distance.187.5_Results.csv")
#table(Locs3.28$TagId)
#str(Locs3.28)
#Locs3.28$DateTime <- as.POSIXct(paste(Locs3.28$Date, Locs3.28$Time), format= "%Y-%m-%d %H:%M:%S", tz="America/Denver")
#Tag781 <- Locs3.28[Locs3.28$TagId == "781E4B78",]
#TagList <- split(Locs3.28, f=Locs3.28$TagId)
#get range of dates of locations by TagId
#DateRangeTag781 <- range(Tag781$Date)
DateRange <- lapply(TagList, function (x) range(x$DateTime))
DateRange <- lapply(DateRange, function (x) as.Date(x, tz="America/Denver"))
View(DateRange)
#DateSeq <- seq.POSIXt(as.POSIXct(paste(DateRangeTag781[1] -1, "05:00:00"),format= "%Y-%m-%d %H:%M:%S", tz="America/Denver"),as.POSIXct(paste(DateRangeTag781[2] + 1, "05:00:00"),format= "%Y-%m-%d %H:%M:%S", tz="America/Denver"), by="1 day")
DateSeq <- lapply(DateRange, function (x)
seq.POSIXt(as.POSIXct(paste(x[1] -1, "05:00:00"),format= "%Y-%m-%d %H:%M:%S", tz="America/Denver"),as.POSIXct(paste(x[2] + 1, "05:00:00"),format= "%Y-%m-%d %H:%M:%S", tz="America/Denver"), by="1 day"))
View(DateSeq)
DateSeq[["192D2A1E"]]
View(DateKey)
View(DateSeq)
#DateKey <- data.frame(TagId=Tag781$TagId[1], Date=DateSeqTag781, Date2=DateSeqTag781 + 86400)
DateKey <- lapply(DateSeq, function (x) data.frame(TagId=name(x), Date=x, Date2=x + 86400))
#DateKey <- data.frame(TagId=Tag781$TagId[1], Date=DateSeqTag781, Date2=DateSeqTag781 + 86400)
DateKey <- lapply(DateSeq, function (x) data.frame(TagId=names(x), Date=x, Date2=x + 86400))
DateSeq[["192D2A1E"]]
names(DateSeq)
#DateKey <- data.frame(TagId=Tag781$TagId[1], Date=DateSeqTag781, Date2=DateSeqTag781 + 86400)
DateKeyNames <- names(DateSeq)
DateKey <- lapply(DateSeq, function (x) data.frame(TagId=names(x[i]), Date=x, Date2=x + 86400))
#DateKey <- data.frame(TagId=Tag781$TagId[1], Date=DateSeqTag781, Date2=DateSeqTag781 + 86400)
DateKey <- lapply(DateSeq, function (x) data.frame(Date=x, Date2=x + 86400))
View(DateKey)
DateKey <- Map(cbind, DateKey, name=names(DateKey))
View(DateKey)
keep <- TimeRange[TimeRange$TimeDiff >= 20,]
View(keep)
View(keep)
View(Locs3.28)
TagID <- "781E4B78"
#########################apply time spread filters#########################
DateNamesList <-paste(TagId, TimeRange$DateKeyStart)
#########################apply time spread filters#########################
DateNamesList <-paste(TagID, TimeRange$DateKeyStart)
DateNamesList
#########################apply time spread filters#########################
DateNamesList <-paste(TagID, keep$DateKeyStart)
DateNamesList
LocsbyDate <- lapply(keep, function (x) DateNamesList <- Tag781[between(Tag781$DateTime, TimeRange$DateKeyStart[i], TimeRange$DateKeyEnd[i]),])
View(LocsbyDate)
#########################apply time spread filters#########################
DateNamesList <-paste(TagID, keep$DateKeyStart, "-", keep$DateKeyEnd)
DateNamesList
#########################apply time spread filters#########################
DateNamesList <-paste(TagID, format(as.Date(keep$DateKeyStart), "%m-%d"), "-", format(as.Date(keep$DateKeyEnd), "%m-%d"))
DateNamesList
#########################apply time spread filters#########################
DateNamesList <-paste(TagID, paste0(format(as.Date(keep$DateKeyStart), "%m-%d"), "-", format(as.Date(keep$DateKeyEnd), "%m-%d")))
DateNamesList
#########################apply time spread filters#########################
DateNamesList <-paste(TagID, paste0(format(as.Date(keep$DateKeyStart), "%m/%d"), "-", format(as.Date(keep$DateKeyEnd), "%m/%d")))
DateNamesList
LocsbyDate <- lapply(keep, function (x) Tag781[between(Tag781$DateTime, keep$DateKeyStart[i], keep$DateKeyEnd[i]),])
View(LocsbyDate)
View(LocsbyDate)
LocsbyDate <- lapply(keep, function (x) Tag781[between(Tag781$DateTime, keep$DateKeyStart, keep$DateKeyEnd),])
?split
Locs2 <- Locs[-(1:length(Locs$TagID)),]
Locs2 <- Tag781[-(1:length(Tag781$TagID)),]
Locs2 <- Tag781[-c(1:length(Tag781$TagID)),]
length(Tag781$TagId)
Locs2 <- Tag781[-c(1:length(Tag781$TagId)),]
for (i in 1:length(TimeRange$DateKeyStart)){
x <- Tag781[between(Tag781$DateTime, TimeRange$DateKeyStart[i], TimeRange$DateKeyEnd[i]),]
Locs2 <- rbind(Locs2, x)
}
View(Locs2)
View(TimeRange)
View(keep)
table(Locs2$Date)
Locs2 <- Tag781[-c(1:length(Tag781$TagId)),]
for (i in 1:length(TimeRange$DateKeyStart)){
x <- Tag781[between(Tag781$DateTime, keep$DateKeyStart[i], keep$DateKeyEnd[i]),]
Locs2 <- rbind(Locs2, x)
}
rm(Locs2)
Locs2 <- Tag781[-c(1:length(Tag781$TagId)),]
for (i in 1:length(TimeRange$DateKeyStart)){
x <- Tag781[between(Tag781$DateTime, keep$DateKeyStart[i], keep$DateKeyEnd[i]),]
Locs2 <- rbind(Locs2, x)
}
?rbind
rm(Locs2)
Locs2 <- Tag781[-c(1:length(Tag781$TagId)),]
for (i in 1:length(keep$DateKeyStart)){
x <- Tag781[between(Tag781$DateTime, keep$DateKeyStart[i], keep$DateKeyEnd[i]),]
Locs2 <- rbind(x, Locs2)
}
table(Locs2$Date)
?foverlaps
library(data.table)
?foverlaps
?between
Locs2 <- Tag781[-c(1:length(Tag781$TagId)),]
for (i in 1:length(keep$DateKeyStart)){
x <- Tag781[between(Tag781$DateTime, keep$DateKeyStart[i], keep$DateKeyEnd[i]),]
x$DateKeyStart <- keep$DateKeyStart[i]
Locs2 <- rbind(x, Locs2)
}
str(Locs2)
Locs3 <- split(Locs2, f=Locs2$DateKeyStart)
View(Locs3)
names(Locs3) <- DateNamesList
View(Locs3)
#########################filter Locs by point spread########################
library(sf)
Locs4 <- lapply(Locs3, function (x) st_as_sf(x, coords = c("x.est", "y.est"), crs=CRS("+init=epsg:32613")))
?st_as_sf
Locs4 <- lapply(Locs3, function (x) st_as_sf(x, coords = c("x.est", "y.est"), crs=crs("+init=epsg:32613")))
?crs
?CRS
Locs4 <- lapply(Locs3, function (x) st_as_sf(x, coords = c("x.est", "y.est"), crs="+init=epsg:32613"))
library(sp)
Locs4 <- lapply(Locs3, function (x) st_as_sf(x, coords = c("x.est", "y.est"), crs=CRS("+init=epsg:32613")))
?st_centroid
AvgLocs <- lapply(Locs4, function (x) st_centroid(x))
View(AvgLocs)
View(Locs4)
st_centroid(Locs4[["781E4B78 01/19-01/20"]])
mean(Locs4[["781E4B78 01/19-01/20"]])
########################scrap###################################
read_csv("C:/Users/eliwi/OneDrive/Documents/Supercomputer/nodes/33B32D/beep_0.csv")
library(readr)
########################scrap###################################
read_csv("C:/Users/eliwi/OneDrive/Documents/Supercomputer/nodes/33B32D/beep_0.csv")
View(AvgLocs)
AvgLocs <- lapply(Locs4, function (x) summarise(meanX= mean(x$x.est), meanY= mean (x$y.est)))
AvgLocs <- lapply(Locs4, function (x) summarize(meanX= mean(x$x.est), meanY= mean (x$y.est)))
?summarise
AvgLocs <- lapply(Locs4, function (x) as.vector(mean(x$x.est), mean(x$y.est)))
class(Locs4[["781E4B78 01/19-01/20"]])
AvgLocs <- lapply(Locs4, function (x) summarise(st_centroid(x)))
View(AvgLocs)
AvgLocs <- lapply(AvgLocs, function (x) st_coordinates(x))
View(AvgLocs)
AvgLocs <- lapply(Locs4, function (x) summarise(st_centroid(x)))
View(AvgLocs)
AvgLocs <- lapply(AvgLocs, function (x) st_geometry(x))
View(AvgLocs)
AvgLocs <- lapply(Locs4, function (x) summarise(st_centroid(x)))
View(AvgLocs)
AvgLocs[["781E4B78 01/19-01/20"]]
st_coordinates(AvgLocs[["781E4B78 01/19-01/20"]])
AvgLocs[["781E4B78 01/19-01/20"]]$geometry
?st_geometry
st_geometry(AvgLocs[["781E4B78 01/19-01/20"]])
333+19
mean(Locs4[["781E4B78 01/19-01/20"]]$geometry)
View(Locs3)
mean(Locs3[["781E4B78 01/19-01/20"]]$x.est)
AvgLocs[["781E4B78 01/19-01/20"]][["geometry"]][[1]]
Locs3[["781E4B78 01/19-01/20"]][["x.est"]]
AvgLocs <- lapply(Locs4, function (x) x%>%summarise(geometry=st_union(geometry))%>%st_centroid)
View(AvgLocs)
AvgLocs[["781E4B78 01/19-01/20"]][["geometry"]][[1]]
mean(Locs3[["781E4B78 01/19-01/20"]]$y.est)
AvgLocs <- lapply(Locs3, function (x) as.vector(mean(x$x.est), mean(y$y.est)))
AvgLocs <- lapply(Locs3, function (x) as.vector(mean(x$x.est), mean(x$y.est)))
?mean
AvgLocs <- lapply(Locs3, function (x) as.vector(mean(x$x.est,x$y.est)))
AvgLocs <- lapply(Locs3, function (x) summarise(meanX=mean(x$x.est),meanY=mean(x$y.est)))
?across
AvgLocs <- lapply(Locs4, function (x) x%>%summarise(geometry=st_union(geometry))%>%st_centroid)
AvgLocs <- lapply(Locs4, function (x) st_coordinates(x))
View(AvgLocs)
AvgLocs <- lapply(Locs4, function (x) x%>%summarise(geometry=st_union(geometry))%>%st_centroid)
View(AvgLocs)
AvgLocs <- lapply(AvgLocs, function (x) st_coordinates(x))
View(AvgLocs)
?st_distance
Locs5 <- lapply(Locs4, y=AvgLocs function (x) mutate(distance=stdistance(y)))
Locs5 <- lapply(Locs4, y=AvgLocs, function (x) mutate(distance=stdistance(y)))
Locs5 <- lapply(Locs4, function (x) mutate(distance=stdistance(y)), y=AvgLocs)
Locs5 <- lapply(Locs4, y=AvgLocs, function (x,y) mutate(distance=stdistance(y)))
Locs5 <- lapply(Locs4, y=AvgLocs, function (x,y) mutate(distance=st_distance(y)))
Locs5 <- lapply(Locs4, y=AvgLocs, function (x,y) mutate(distance=st_distance(x,y)))
AvgLocs <- lapply(Locs4, function (x) x%>%summarise(geometry=st_union(geometry))%>%st_centroid)
Locs5 <- lapply(Locs4, y=AvgLocs, function (x,y) mutate(distance=st_distance(x,y)))
View(AvgLocs)
View(Locs4)
st_crs(AvgLocs[["781E4B78 01/19-01/20"]])
st_crs(Locs4[["781E4B78 01/19-01/20"]])
Locs5 <- lapply(Locs4, y=AvgLocs, function (x,y) mutate(distance=st_distance(x,y)))
st_distance(Locs4[["781E4B78 01/19-01/20"]], AvgLocs[["781E4B78 01/19-01/20"]])
Locs5 <- lapply(Locs4, function (x) mutate(distance=st_distance(x,AvgLocs)))
Locs5 <- lapply(Locs4, function (x) mutate(distance=st_distance(x,st_geometry(AvgLocs))))
Locs5 <- lapply(Locs4, y= AvgLocs, function (x,y) mutate(distance=st_distance(x,st_geometry(y))))
Locs5 <- lapply(Locs4, y= AvgLocs, function (x,y) mutate(distance=st_distance(x,y)))
lapply(Locs4, function (x) st_crs(x))
?Map
?mapply
mapply(rep, 1:4, 4:1)
Locs5 <- Map(cbind, Locs4, AvgLocs, distance=st_distance(x,y))
lapply(AvgLocs, function (x) st_crs(x))
Locs5 <- Map(mutate, Locs4, AvgLocs, distance=st_distance(x,y))
Locs5 <- Map(mutate, Locs4, y=AvgLocs, distance=st_distance(x,y))
Locs5 <- Map(mutate, Locs4, distance=st_distance(x,AvgLocs))
Locs5 <- Map(mutate, Locs4, distance=st_distance(Locs4,AvgLocs))
?mutate
Locs5 <- mapply(function (x,y) mutate(x, distance=st_distance(x,y)), x=Locs4, y=AvgLocs))
Locs5 <- mapply(function (x,y) mutate(x, distance=st_distance(x,y)), x=Locs4, y=AvgLocs)
View(Locs5)
Locs5 <- t(mapply(function (x,y) mutate(x, distance=st_distance(x,y)), x=Locs4, y=AvgLocs))
?do.call
Locs5 <- lapply(function (x,y) mutate(x, distance=st_distance(x,y)), x=Locs4, y=AvgLocs)
Locs5 <- lapply(x=Locs4, y=AvgLocs, function (x,y) mutate(x, distance=st_distance(x,y)))
Locs5 <- lapply(Locs4, y=AvgLocs, function (x,y) mutate(x, distance=st_distance(x,y)))
?do.call
do.call("complex", list(imaginary = 1:3))
Locs5 <- lapply(1:6, function (x,y) mutate(Locs4, distance=st_distance(Locs4,AvgLocs)))
?map
?Map
Locs5 <- Map(function (x,y) mutate(x, distance=st_distance(x,y)), Locs4, AvgLocs)
View(Locs5)
st_distance(AvgLocs[["781E4B78 01/19-01/20"]], Locs4[["781E4B78 01/19-01/20"]])
Locs5[["781E4B78 01/19-01/20"]][["distance"]]
########################scrap###################################
test <- cbind(st_distance(AvgLocs[["781E4B78 01/19-01/20"]], Locs4[["781E4B78 01/19-01/20"]]), Locs5[["781E4B78 01/19-01/20"]][["distance"]])
########################scrap###################################
x <- st_distance(AvgLocs[["781E4B78 01/19-01/20"]], Locs4[["781E4B78 01/19-01/20"]])
y <- Locs5[["781E4B78 01/19-01/20"]][["distance"]]
########################scrap###################################
x <- as.data.frame(st_distance(AvgLocs[["781E4B78 01/19-01/20"]], Locs4[["781E4B78 01/19-01/20"]]))
########################scrap###################################
x <- as.data.frame(t(st_distance(AvgLocs[["781E4B78 01/19-01/20"]], Locs4[["781E4B78 01/19-01/20"]])))
y <- as.data.frame(Locs5[["781E4B78 01/19-01/20"]][["distance"]])
test <- cbind(x,y)
View(test)
Locs6 <- rbindlist(Locs5, idcol = TRUE)
str(Locs6)
Locs7 <- Locs6%>%group_by(.id)%>%mutate(SDdistance=sd(distance))
str(Locs7)
Locs7 <- Locs6%>%group_by(.id)%>%mutate(x,SDdistance=sd(distance))
Locs7 <- Locs6%>%group_by(.id)%>%mutate(.,SDdistance=sd(distance))
str(Locs7)
Locs6%>%group_by(.id)%>%summarise(SDdistance=sd(distance))
rm(Locs7)
Locs7$SDdistance <- Locs6%>%group_by(.id)%>%sd(distance)
Locs7 <- Locs6%>%group_by(.id)%>%mutate(SDdistance=sd(distance))
View(Locs7)
unique(Locs7$SDdistance)
